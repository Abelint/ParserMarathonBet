!function(i){var t,e=u(),n=function(){if(e)return Collapsible.Manager();return Collapsible.Manager(Collapsible.LiveCategoriesProcessor(),Collapsible.LivePopularCategoriesProcessor(),Collapsible.PrematchCategoriesProcessor(function(){return initData.base_dir+"/events/expand-union-category.htm?"+i.URLCodec.fromObject(((e=i.Page.getSearchParams()).treeIds=initData.treeIds,e));var e}))}(),o=e?Collapsible.Manager():Collapsible.Manager(Collapsible.LiveSportsProcessor());function c(e,t){return getPollingUpdateHelper().unsubscribe(),e("default",{dataType:"json",ignorePushHistory:t}).updateContent(function(e){for(var t=0;t<e.length;t++){var a=e[t];if(a.selector)i(a.selector)["inner"===a.replace?"html":"replaceWith"](applyFavorites(a.content));else if(a.prop)switch(a.prop){case"windowTitle":document.title=a.val;break;case"canonicalHref":i("link[rel=canonical]").attr("href",a.val);break;case"description":i("meta[name=description]").attr("content",a.val);break;case"reactData":window.reactData=JSON.parse(a.val),window.Emitter.emit("reactData.updated");break;case"siteStyle":window.initData.siteStyle=a.val;break;case"liveUpdatePath":window.initData.liveUpdatePath=a.val;break;case"updated":window.initData.updated=a.val;break;case"treeIds":initData.treeIds=a.val;break;case"showCollapseAllCategoriesCheckbox":i(".collapse-all-categories-checkbox").toggleClass("hidden",!a.val);break;case"showCollapseAllSportsCheckbox":i(".collapse-all-sports-checkbox").toggleClass("hidden",!a.val);break;case"rootBetSelectionContainer":i("body").attr("data-betselection-container",a.val)}}})}function a(e,t){return e.test(t||i.Page.location().href)}function r(e){return a(/live(\/)?(\/[\d]+.*)?$/,e)}function l(e){return a(/live\/popular/,e)}function s(e){return a(/live\/favorites/,e)}function d(e){return a(/live\/allstream/,e)}function u(e){return a(/live\/announces/,e)}function p(e){return a(/live\/virtual/,e)}function g(e){return a(/union\//,e)}function f(e){return r(e)||s(e)||l(e)||d(e)||g(e)}function h(a,e,n){if(t=i.Page.location().href,o=a,r=f(),(t!=o?r&&f(o):r)&&!e)return c(function(e,t){return i.Page.location(a,e,makeCacheableAjaxRequestSettings(t),n)},n);var t,o,r;i.Page.location().href=a}function v(){n.update().then(o.update),i(document).trigger("content.loaded"),window.Emitter.emit("content.loaded"),getPollingUpdateHelper().subscribe()}function b(e,t){e=h(e,(t=i.extend({},{scrollTop:!1},t||{})).forcedReload,t.ignorePushHistory);if(e)return e.done(function(){v(),t.scrollTop&&i(document).trigger("scrollToTop")}),e}function m(r,l){return c(function(e,t){var a=Collapsible.getCollapsibleState(),n=Collapsible.getPopularCollapsibleState(),o=i.URLCodec.toObject(i.Page.location().search.substr(1)),n=i.extend(!0,{reloadPageAction:!0,marketIds:Markets.getVisibleMarkets().toString(),cplcids:n.collapsedCategories.concat(o.cplcids).toString(),eplcids:n.expandedCategories.concat(o.eplcids).toString(),ccids:a.collapsedCategories.concat(o.ccids).toString(),ecids:a.expandedCategories.concat(o.ecids).toString()},r);return i.Page.reload(l||e,i.extend(!0,{},makeCacheableAjaxRequestSettings(t),{data:n}))}).done(v)}function C(e){var t;return l()||s()||d()||g()||FullCategoryManager.getLiveFullCategoryTreeId()||(r()?(t=i.Page.location().pathname,1!=(t=(t=/\/([\d,]+)\/?$/.exec(t||i.Page.location().href))&&t[1]?t[1].split(","):[]).length||t[0]!=e):void 0)}function P(e,t){b(EventsHelper.getLiveEventPagePath(e),{scrollTop:!0,forcedReload:t})}function k(e,t){getPollingUpdateHelper().unsubscribe(),e.allStateChange(t,function(){return t?i.Deferred().resolve().promise():c(function(e,t){return i.Page.location(i.Page.location().href,e,makeCacheableAjaxRequestSettings(t))}).done(function(){v(),i(document).trigger("scrollToTop")})}).always(function(){getPollingUpdateHelper().subscribe()})}function S(e){t=m(e,"reloadPage").done(function(){getPollingUpdateHelper().popState(),t=null})}function E(e,t){"true"==e&&C(t.treeId)&&(t.preventDefault=!0,(e=i("[data-event-treeid="+t.treeId+"]:first").data("eventPath"))?i.Page.location().href=initData.base_dir+"/betting/"+e:P(t.treeId))}i(document).on("liveUpdate.removedIds",function(e,t){Markets.removeIdsFromUrl(t),n.removeIds(t).then(function(){o.removeIds(t)})}),i(document).on("liveUpdate.removedPopular",function(e,t){n.removePopularIds(t)}),i(document).on("click","[data-collapsible] [data-collapsible-clickable-surface]",function(){getPollingUpdateHelper().unsubscribe();var e=i(this).parents("[data-collapsible]:first");return(e.data("sportTreeid")?o:n).toggle(e).always(function(){getPollingUpdateHelper().subscribe()}),!1}),i(document).on("click","[data-collapse-all-categories-link]",function(){var e;return i(this).attr("disabled")||(e=i("[name=collapseAllCategoriesCheckbox]")).prop("checked",!e.prop("checked")).trigger("change"),!1}),i(document).on("click","[data-collapse-all-sports-link]",function(){var e;return i(this).attr("disabled")||(e=i("[name=collapseAllSportsCheckbox]")).prop("checked",!e.prop("checked")).trigger("change"),!1}),i.Page.on("popstate",function(e,t){b(e,{ignorePushHistory:!0})}),i(document).on("click","[data-category-events-link]",function(){var e=i(this).parents("[data-category-treeid]:first").data("categoryTreeid");return FullCategoryManager.liveToggle(e,function(e){return c(function(){return i.Page.location(e,"default",makeCacheableAjaxRequestSettings({dataType:"json"}))}).done(function(){v(),i(document).trigger("scrollToTop")})}),!1}),i(document).on("content.needReload",function(e,t){u()||p()?c(function(e,t){return i.Page.reload("updateReactData",t)}):S(t)}),i(document).on("content.loaded",function(e,t){t&&n.update().then(o.update);t=i.Page.location().pathname;u(t)||p(t)||(l(t)?!i('[data-id="container_POPULAR_EVENTS"] [data-sport-treeid]:first').length&&FullCategoryManager.getLiveFullCategoryTreeId()&&i.Page.replaceState(null,null,i.URLCodec.updateSearchParams(i.Page.location().href,function(e){return delete e[FullCategoryManager.LIVE_FULL_CATEGORIES_PARAM_NAME],e})).then(S):i("[data-sport-treeid]:first").length||(FullCategoryManager.getLiveFullCategoryTreeId()?i.Page.replaceState(null,null,i.URLCodec.updateSearchParams(i.Page.location().href,function(e){return delete e[FullCategoryManager.LIVE_FULL_CATEGORIES_PARAM_NAME],e})).then(S):b(initData.livePopularUrl))),g(t)&&i("[data-live-events-container]").each(function(){i(this)[i("[data-id=container_EVENTS]",this).children().length?"show":"hide"]()})}),i.Links.click(/(\/live(\/.*)?$|\/union\/.*$)/,function(e){var t,a=b(e.href,{scrollTop:!0});return a&&(e=i(e).parents("div.sport-menu-item:first"),t=i.PanbetLoadingStatus.setOn(e),a.always(function(){t.remove()})),!1}),i(document).on("loadPage",function(e,t){b(t.url,{scrollTop:!0})}),i(document).on("markets.members.click",function(e,t){E(i.cookie(initData.openEventNameSeparatelyCookieName),t)}),i(document).on("markets.event-more-view.click",function(e,t){E(i.cookie(initData.openAddMarketsSeparatelyCookieName),t)}),i(document).on("beginAdditionalMarketsUpdate",function(){getPollingUpdateHelper().unsubscribe(),t&&t.abort()}),i(document).on("successAdditionalMarketsUpdate",function(){getPollingUpdateHelper().subscribe(),t&&S()}),i(document).on("liveAnnounces.sortType.change",function(e,t){i("[name=collapseAllCategoriesCheckbox], [name=collapseAllSportsCheckbox], [data-collapse-all-sports-link], [data-collapse-all-categories-link]").attr("disabled","TIME"==t)});var T={Init:function(){var e,t,a;Markets.ONLY_ONE_EVENT_OPEN_AM=!0,Markets.NEED_PROCESS_OPENED_MARKETS=!0,getPollingUpdateHelper().subscribe(),n.update().then(o.update),t=i("#liveEventsContent"),a=i(".grid-middle"),t&&a.on("scroll",function(){clearTimeout(e),t.hasClass("disable-hover")||t.addClass("disable-hover"),e=setTimeout(function(){t.removeClass("disable-hover")},100)}),u()||(i(document).on("change","[name=collapseAllCategoriesCheckbox]",function(){return k(n,i(this).prop("checked")),!1}),i(document).on("change","[name=collapseAllSportsCheckbox]",function(){k(o,i(this).prop("checked"))})),window.Emitter.on("favorites.updated",function(e){getPollingUpdateHelper().unsubscribe(),window.initData.favorites=e,getPollingUpdateHelper().subscribe()}),window.Emitter.on("favoritesTreeStateInfo.updated",function(e){e.serverFavorites&&s(i.Page.location().href)&&!FullCategoryManager.getLiveFullCategoryTreeId()&&(i.isEmptyObject(e.state)?b(initData.base_dir+"/live/popular",{scrollTop:!0}):m())}),window.Emitter.on("gotoEventPage",function(e){P(e.treeId,e.forcedReload)})}};window.getLiveHelper=function(){return T}}(jQuery);
//# sourceMappingURL=LiveHelperClass.map